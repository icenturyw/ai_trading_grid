# 币种走势监测系统使用指南

## 快速开始

### 1. 环境准备

确保你的系统已安装Python 3.7+：

```bash
python --version
```

### 2. 安装依赖

```bash
pip install requests pandas numpy pyyaml colorama
```

或者使用requirements.txt：

```bash
pip install -r requirements.txt
```

### 3. 网络配置

#### 方案一：直接访问（海外用户）
使用默认配置即可，系统会自动尝试多个币安API端点。

#### 方案二：使用代理（中国大陆用户推荐）
1. 复制配置文件：
   ```bash
   copy config_with_proxy.yaml config.yaml
   ```

2. 编辑 `config.yaml`，配置你的代理：
   ```yaml
   api:
     use_proxy: true
     proxy_config:
       http: "http://127.0.0.1:7890"    # 替换为你的代理地址
       https: "http://127.0.0.1:7890"   # 替换为你的代理地址
   ```

#### 方案三：仅使用备用数据源
如果无法访问币安API，系统会自动切换到CoinGecko等免费API。

### 4. 测试连接

```bash
python main.py --test
```

这会测试所有可用的数据源连接。

### 5. 运行演示

```bash
python demo.py
```

查看系统各模块的功能演示。

## 基本使用

### 启动监测系统

```bash
python main.py
```

### 交互命令

进入交互模式后，可以使用以下命令：

#### 监测控制
- `start` - 开始监测
- `stop` - 停止监测
- `status` - 显示监测状态

#### 配置管理
- `config` - 显示当前配置
- `add SYMBOL` - 添加监测币种（如：add ADAUSDT）
- `remove SYMBOL` - 移除监测币种

#### 分析查询
- `analyze SYMBOL TIMEFRAME` - 分析指定币种和周期（如：analyze BTCUSDT 1h）
- `stats` - 显示告警统计

#### 系统命令
- `help` - 显示帮助信息
- `quit` / `exit` / `q` - 退出程序

### 后台运行

```bash
python main.py --daemon
```

## 配置说明

### 主要配置项

```yaml
# 监测的币种列表
symbols:
  - "BTCUSDT"
  - "ETHUSDT"
  - "BNBUSDT"

# 监测的时间周期
timeframes:
  - "1m"    # 1分钟
  - "5m"    # 5分钟
  - "15m"   # 15分钟
  - "1h"    # 1小时
  - "4h"    # 4小时
  - "1d"    # 1天

# 走势分析参数
analysis:
  bollinger_bands:
    period: 20        # 布林带周期
    std_dev: 2        # 标准差倍数
  
  rsi:
    period: 14        # RSI周期
    overbought: 70    # 超买阈值
    oversold: 30      # 超卖阈值
  
  moving_averages:
    short_period: 10  # 短期均线
    long_period: 30   # 长期均线
  
  sideways_threshold: 0.02              # 震荡判断阈值（2%）
  trend_confirmation_periods: 3         # 趋势确认周期数

# 告警设置
alerts:
  console_output: true                  # 控制台输出
  log_file: "alerts.log"               # 日志文件
  email_notifications: false           # 邮件通知（暂未实现）
  webhook_url: null                     # Webhook地址

# 监测间隔（秒）
monitoring_interval: 60
```

### 代理配置

```yaml
api:
  use_proxy: true
  proxy_config:
    http: "http://127.0.0.1:7890"
    https: "http://127.0.0.1:7890"
```

常见代理端口：
- Clash: 7890
- V2Ray: 1080
- Shadowsocks: 1080

## 走势识别算法

系统使用多种技术指标来识别走势：

### 技术指标

1. **布林带（Bollinger Bands）**
   - 判断价格是否在正常波动范围内
   - 布林带宽度反映市场波动性

2. **RSI（相对强弱指数）**
   - 识别超买超卖状态
   - 范围：0-100

3. **移动平均线**
   - 短期和长期均线的关系
   - 判断趋势方向

4. **价格波动率**
   - 衡量价格变化的剧烈程度
   - 区分震荡和单边走势

### 走势类型

- **震荡走势**：价格在一定范围内波动，没有明确方向
- **上涨走势**：价格持续向上，突破阻力位
- **下跌走势**：价格持续向下，跌破支撑位

### 告警触发条件

系统在以下情况发出告警：
- 从震荡转为上涨
- 从震荡转为下跌
- 从上涨转为震荡
- 从下跌转为震荡
- 趋势反转（上涨转下跌，下跌转上涨）

## 故障排除

### 常见问题

1. **无法连接API**
   - 检查网络连接
   - 配置代理设置
   - 系统会自动切换到备用数据源

2. **依赖包安装失败**
   ```bash
   pip install --upgrade pip
   pip install -r requirements.txt
   ```

3. **配置文件错误**
   - 检查YAML语法
   - 使用默认配置：删除config.yaml，重新运行程序

4. **权限问题**
   - 确保有写入logs目录的权限
   - Windows用户可能需要以管理员身份运行

### 日志文件

- `logs/monitor.log` - 系统运行日志
- `logs/alerts.log` - 告警记录
- `logs/demo_alerts.log` - 演示告警记录

### 获取帮助

1. 运行演示：`python demo.py`
2. 查看交互帮助：在程序中输入 `help`
3. 检查日志文件了解详细错误信息

## 高级功能

### 自定义配置

可以通过修改配置文件来：
- 调整技术指标参数
- 添加更多监测币种
- 修改告警阈值
- 设置监测间隔

### 扩展开发

系统采用模块化设计，可以轻松扩展：
- 添加新的技术指标
- 集成其他数据源
- 实现邮件/短信通知
- 添加Web界面

### 性能优化

- 使用多线程并行处理
- 智能API端点切换
- 自动重试机制
- 内存使用优化

## 免责声明

本系统仅用于技术分析和学习目的，不构成投资建议。加密货币投资存在风险，请谨慎决策。
